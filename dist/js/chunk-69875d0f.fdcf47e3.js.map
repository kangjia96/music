{"version":3,"sources":["webpack:///./src/common/js/dom.js","webpack:///./src/api/recommend.js","webpack:///./src/components/recommend/recommend.vue?82af","webpack:///./src/components/recommend/recommend.vue?a12a","webpack:///./src/base/slider/slider.vue?e9ca","webpack:///src/base/slider/slider.vue","webpack:///./src/base/slider/slider.vue?0328","webpack:///./src/base/slider/slider.vue","webpack:///src/components/recommend/recommend.vue","webpack:///./src/components/recommend/recommend.vue?09d1","webpack:///./src/components/recommend/recommend.vue","webpack:///./src/base/slider/slider.vue?5894"],"names":["addClass","el","className","hasClass","newClass","split","push","join","reg","RegExp","test","getData","name","val","prefix","setAttribute","getAttribute","__webpack_require__","d","__webpack_exports__","getRecommend","getDiscList","getSonglist","_common_js_jsonp_js__WEBPACK_IMPORTED_MODULE_0__","_config_js__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_2___default","n","url","data","Object","assign","commonParams","platfrom","uin","needNewCode","console","log","jsonp","options","platform","hostUin","sin","ein","sortId","format","categoryId","g_tk","rnd","Math","random","Axios","get","params","then","res","Promise","resolve","disstid","type","json","utf8","onlysong","new_format","concat","loginUin","outCharset","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_recommend_vue_vue_type_style_index_0_id_c49401ba_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_recommend_vue_vue_type_style_index_0_id_c49401ba_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","discList","recommends","_l","item","key","id","href","linkUrl","src","picUrl","on","load","loadImage","_e","_v","idx","dissid","click","$event","selectItem","directives","rawName","value","expression","width","height","domProps","innerHTML","_s","creator","dissname","length","staticRenderFns","slidervue_type_template_id_58523484_render","_t","class","active","currentPageIndex","slidervue_type_template_id_58523484_staticRenderFns","slidervue_type_script_lang_js_","dots","props","loop","Boolean","default","autoPlay","interval","Number","threshold","speed","mounted","_this","setTimeout","_setSliderWidth","_initDots","_initSlider","_play","window","addEventListener","slider","refresh","methods","isResize","children","$refs","sliderGroup","sliderWidth","clientWidth","i","child","dom","style","Array","_this2","bscroll_esm","scrollX","scrollY","momentum","snap","pageIndex","getCurrentPage","pageX","clearInterval","timer","_this3","setInterval","next","destroyed","slider_slidervue_type_script_lang_js_","component","componentNormalizer","recommendvue_type_script_lang_js_","mixins","mixin","created","_getRecommend","_getDiscList","objectSpread","handlePlaylist","playlist","bottom","recommend","scroll","$router","path","setDisc","code","config","cdlist","songlist","list","checkloaded","vuex_esm","components","Slider","Scroll","scroll_scroll","Loading","loading","recommend_recommendvue_type_script_lang_js_","recommend_component","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_slider_vue_vue_type_style_index_0_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_slider_vue_vue_type_style_index_0_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-69875d0f.fdcf47e3.js","sourcesContent":["export function addClass(el, className) {\r\n  if (hasClass(el, className)) {\r\n    return\r\n  }\r\n  let newClass = el.className.split(' ')\r\n  newClass.push(className)\r\n  el.className = newClass.join(' ')\r\n}\r\n\r\nexport function hasClass(el, className) {\r\n  let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)')\r\n  return reg.test(el.className)\r\n}\r\n\r\nexport function getData(el, name, val) {\r\n  const prefix = 'data-'\r\n  name = prefix + name\r\n  if (val) {\r\n    return el.setAttribute(name, val)\r\n  } else {\r\n    // console.log(el, name)\r\n    return el.getAttribute(name)\r\n  }\r\n}\r\n","import jsonp from '../common/js/jsonp.js'\r\nimport { commonParams, options } from './config.js'\r\nimport Axios from 'axios';\r\n\r\nexport function getRecommend() { //recommend.vue调用jsop 并返回数据\r\n  const url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    platfrom: 'h5',\r\n    uin: 0,\r\n    needNewCode: 1\r\n  })\r\n  console.log(data)\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\nexport function getDiscList() {\r\n  const url = \"/api/getDiscList\"\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    platform: 'yqq.json',\r\n    hostUin: 0,\r\n    sin: 0,\r\n    ein: 29,\r\n    sortId: 5,\r\n    format: 'json',\r\n    needNewCode: 0,\r\n    categoryId: 10000000,\r\n    g_tk: 1928093487,\r\n    rnd: Math.random(),\r\n  })\r\n\r\n  return Axios.get(url, {\r\n    params: data\r\n  }).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n}\r\n\r\nexport function getSonglist(disstid) {\r\n  const url = '/api/getMusicDisc'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    type: 1,\r\n    json: 1,\r\n    utf8: 1,\r\n    onlysong: 0,\r\n    new_format: 1,\r\n    disstid: `${disstid}`,\r\n    g_tk: 1186940298,\r\n    loginUin: 1477129230,\r\n    hostUin: 0,\r\n    format: 'json',\r\n    outCharset: 'utf - 8',\r\n    platform: 'yqq.json',\r\n    needNewCode: 0,\r\n  })\r\n\r\n  return Axios.get(url, {\r\n    params: data\r\n  }).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recommend.vue?vue&type=style&index=0&id=c49401ba&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recommend.vue?vue&type=style&index=0&id=c49401ba&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"recommend\",staticClass:\"recommend\"},[_c('Scroll',{ref:\"scroll\",staticClass:\"recommend-content\",attrs:{\"data\":_vm.discList}},[_c('div',[(_vm.recommends.length)?_c('div',{staticClass:\"slider-wrapper\"},[_c('slider',_vm._l((_vm.recommends),function(item){return _c('div',{key:item.id},[_c('a',{attrs:{\"href\":item.linkUrl}},[_c('img',{staticClass:\"needsclick\",attrs:{\"src\":item.picUrl},on:{\"load\":_vm.loadImage}})])])}),0)],1):_vm._e(),_c('div',{staticClass:\"recommend-list\"},[_c('h1',{staticClass:\"list-title\"},[_vm._v(\"热门歌单推荐\")]),_c('ul',_vm._l((_vm.discList),function(item,idx){return _c('li',{key:item.dissid,staticClass:\"item\",on:{\"click\":function($event){return _vm.selectItem(item, idx)}}},[_c('div',{staticClass:\"icon\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.imgurl),expression:\"item.imgurl\"}],attrs:{\"width\":\"60\",\"height\":\"60\"}})]),_c('div',{staticClass:\"text\"},[_c('h2',{staticClass:\"name\",domProps:{\"innerHTML\":_vm._s(item.creator.name)}}),_c('p',{staticClass:\"desc\",domProps:{\"innerHTML\":_vm._s(item.dissname)}})])])}),0)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.discList.length),expression:\"!discList.length\"}],staticClass:\"loading-container\"},[_c('Loading')],1)]),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"slider\",staticClass:\"slider\"},[_c('div',{ref:\"sliderGroup\",staticClass:\"slider-group\"},[_vm._t(\"default\")],2),_c('div',{staticClass:\"dots\"},_vm._l((_vm.dots),function(item,idx){return _c('span',{key:idx,staticClass:\"dot\",class:{active: _vm.currentPageIndex == idx}})}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"slider\" ref=\"slider\">\r\n    <div class=\"slider-group\" ref=\"sliderGroup\">\r\n      <slot></slot>\r\n    </div>\r\n    <div class=\"dots\">\r\n      <span class=\"dot\" :key=\"idx\" v-for=\"(item, idx) in dots\" :class=\"{active: currentPageIndex == idx}\"></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BScroll from \"better-scroll\"\r\nimport { addClass } from '../../common/js/dom.js'\r\n// import { clearInterval } from 'timers';\r\nexport default {\r\n  data () {\r\n    return {\r\n      dots: [],\r\n      currentPageIndex: 0,\r\n    }\r\n  },\r\n  props: {\r\n    loop: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    autoPlay: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    interval: {\r\n      type: Number,\r\n      default: 4000\r\n    },\r\n    threshold: {\r\n      type: Number,\r\n      default: 0.3\r\n    },\r\n    speed: {\r\n      type: Number,\r\n      default: 400\r\n    }\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this._setSliderWidth()\r\n      this._initDots()\r\n      this._initSlider()\r\n      if (this.autoPlay) {\r\n        console.log('run')\r\n        this._play()\r\n      }\r\n    }, 20)\r\n\r\n    window.addEventListener('resize', () => {\r\n      if (!this.slider) {\r\n        return\r\n      }\r\n      this._setSliderWidth(true)\r\n      //当宽度发生变化 让其重新计算 _initSlider\r\n      this.slider.refresh()\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    _setSliderWidth (isResize) {//设置轮播图的宽度\r\n      this.children = this.$refs.sliderGroup.children\r\n      //所有请求到轮播图资源 将其放到this上 其他函数容易访问\r\n      console.log(this.children.length)\r\n\r\n      let width = 0\r\n      let sliderWidth = this.$refs.slider.clientWidth\r\n      //获取祖先元素slider宽度\r\n\r\n      for (let i = 0; i < this.children.length; i++) {\r\n        let child = this.children[i]\r\n        addClass(child, 'slider-item') //添加类名\r\n\r\n        child.style.width = sliderWidth + 'px' //使其宽度与祖先元素一般宽\r\n        width += sliderWidth\r\n      }\r\n\r\n      if (this.loop && !isResize) { //为了无限滚动 使其多有连个轮播图的宽度 即7个dom对象 因为BScroll会根据loop 多复制两个dom\r\n        width += 2 * sliderWidth\r\n      }\r\n\r\n      this.$refs.sliderGroup.style.width = width + 'px' //使其父元素的宽度与其一般宽\r\n    },\r\n\r\n    _initDots() {\r\n      //设置轮播图的小圆点切换\r\n      this.dots = new Array(this.children.length)\r\n      console.log(this.dots)\r\n    },\r\n\r\n    _initSlider () {\r\n      //设置轮播图的滚动\r\n      this.slider = new BScroll(this.$refs.slider, {\r\n        scrollX: true,\r\n        scrollY: false,\r\n        momentum: false,\r\n        snap: {\r\n          loop: this.loop, //循环滚动\r\n          threshold: this.threshold,\r\n          speed: this.speed,\r\n        },\r\n        // click: true,\r\n      })\r\n\r\n      this.slider.on('scrollEnd', () => {\r\n        if (this.loop) {\r\n          let pageIndex = this.slider.getCurrentPage().pageX\r\n          // console.log(pageIndex)\r\n          this.currentPageIndex = pageIndex\r\n        }\r\n\r\n        if (this.autoPlay) { //当自己手动滑动的时候 需要取消自动轮播 然后在重新运行 防止手动自动在一起\r\n          clearInterval(this.timer)\r\n          this._play()\r\n        }\r\n      })\r\n    },\r\n\r\n    _play() { //自动轮播\r\n      this.timer = setInterval(() => {\r\n        // console.log(this.slider)\r\n        this.slider.next()\r\n      }, this.interval);\r\n    }\r\n\r\n  },\r\n\r\n  destroyed () { //逐渐被销毁的时候 清理计时器函数 释放内存\r\n    clearInterval(this.timer)\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"stylus\">\r\n@import '../../common/stylus/variable.styl';\r\n\r\n.slider {\r\n  min-height: 1px;\r\n\r\n  .slider-group {\r\n    position: relative;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n\r\n    .slider-item {\r\n      float: left;\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n      text-align: center;\r\n\r\n      a {\r\n        display: block;\r\n        width: 100%;\r\n        overflow: hidden;\r\n        text-decoration: none;\r\n      }\r\n\r\n      img {\r\n        display: block;\r\n        width: 100%;\r\n      }\r\n    }\r\n  }\r\n\r\n  .dots {\r\n    position: absolute;\r\n    right: 0;\r\n    left: 0;\r\n    bottom: 12px;\r\n    text-align: center;\r\n    font-size: 0;\r\n\r\n    .dot {\r\n      display: inline-block;\r\n      margin: 0 4px;\r\n      width: 8px;\r\n      height: 8px;\r\n      border-radius: 50%;\r\n      background: $color-text-l;\r\n\r\n      &.active {\r\n        width: 20px;\r\n        border-radius: 5px;\r\n        background: $color-text-ll;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./slider.vue?vue&type=template&id=58523484&\"\nimport script from \"./slider.vue?vue&type=script&lang=js&\"\nexport * from \"./slider.vue?vue&type=script&lang=js&\"\nimport style0 from \"./slider.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"recommend\" ref=\"recommend\">\r\n    <Scroll ref=\"scroll\" class=\"recommend-content\" :data=\"discList\">\r\n      <!-- 没有叨叨数据的情况下 会先加载Loading组件 让用户进行等待 -->\r\n      <div>\r\n        <div v-if=\"recommends.length\" class=\"slider-wrapper\">\r\n          <slider>\r\n            <div :key=\"item.id\" v-for=\"item of recommends\">\r\n              <a :href=\"item.linkUrl\">\r\n                <img class=\"needsclick\" @load=\"loadImage\" :src=\"item.picUrl\" />\r\n              </a>\r\n            </div>\r\n          </slider>\r\n        </div>\r\n        <div class=\"recommend-list\">\r\n          <h1 class=\"list-title\">热门歌单推荐</h1>\r\n          <ul>\r\n            <li @click=\"selectItem(item, idx)\" v-for=\"(item, idx) in discList\" :key=\"item.dissid\" class=\"item\">\r\n              <div class=\"icon\">\r\n                <img width=\"60\" height=\"60\" v-lazy=\"item.imgurl\" />\r\n              </div>\r\n              <div class=\"text\">\r\n                <h2 class=\"name\" v-html=\"item.creator.name\"></h2>\r\n                <p class=\"desc\" v-html=\"item.dissname\"></p>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"loading-container\" v-show=\"!discList.length\">\r\n        <Loading />\r\n      </div>\r\n    </Scroll>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Loading from \"../../base/loading/loading\"\r\n  import Slider from \"../../base/slider/slider\"\r\n  import Scroll from \"../../base/scroll/scroll\"\r\n  import { getRecommend, getDiscList, getSonglist } from \"../../api/recommend\"\r\n  import { ERR_OK } from '../../api/config'\r\n  import { playlistMixin } from '../../common/js/mixin'\r\n  import { mapMutations } from 'vuex'\r\n\r\n  export default {\r\n    mixins: [playlistMixin], //组件同名方法会覆盖mixins\r\n    data() {\r\n      return {\r\n        recommends: [],\r\n        discList: []\r\n      }\r\n    },\r\n    created() {\r\n      this._getRecommend() //在组件实例创建之后才请求数据\r\n      this._getDiscList()\r\n    },\r\n    methods: {\r\n      handlePlaylist(playlist) {\r\n        const bottom = playlist.length > 0 ? '60px' : ''\r\n        this.$refs.recommend.style.bottom = bottom\r\n        this.$refs.scroll.refresh()\r\n      },\r\n      selectItem(item, idx) {\r\n        this.$router.push({\r\n          path: `/recommend/${item.dissid}`\r\n        })\r\n        this.setDisc(item)\r\n        getSonglist(item.dissid).then(res => {\r\n          if (res.code === ERR_OK) {\r\n            // this.recommends = res.data.slider\r\n            console.log(res.cdlist[0].songlist)\r\n          }\r\n        })\r\n        // console.log(item)\r\n        // console.log('push')\r\n      },\r\n      _getRecommend() { //封装jsonp请求 得到数据\r\n        getRecommend().then(res => {\r\n          if (res.code === ERR_OK) {\r\n            this.recommends = res.data.slider\r\n            // console.log(res)\r\n          }\r\n        })\r\n      },\r\n      _getDiscList() {\r\n        getDiscList().then(res => {\r\n          if (res.code === ERR_OK) {\r\n            // this.recommends = res.data.slider\r\n            this.discList = res.data.list\r\n            // console.log(res.data.list)\r\n          }\r\n        })\r\n      },\r\n      loadImage() {\r\n        if (!this.checkloaded) {\r\n          this.$refs.scroll.refresh()\r\n          this.checkloaded = true\r\n        }\r\n      },\r\n      ...mapMutations({\r\n        setDisc: 'SET_DISC'\r\n      })\r\n    },\r\n    components: {\r\n      Slider,\r\n      Scroll,\r\n      Loading,\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import '../../common/stylus/variable.styl'\r\n  .recommend\r\n    position: fixed\r\n    width: 100%\r\n    top: 88px\r\n    bottom: 0\r\n    .recommend-content\r\n      height: 100%\r\n      overflow: hidden\r\n      .slider-wrapper\r\n        position: relative\r\n        width: 100%\r\n        overflow: hidden\r\n      .recommend-list\r\n        // height: 65px\r\n        line-height: 65px\r\n        text-align: center\r\n        font-size: $font-size-medium\r\n        color: $color-theme\r\n      .item\r\n        display: flex\r\n        box-sizing: border-box\r\n        align-items: center\r\n        padding: 0 20px 20px 20px\r\n        .icon\r\n          display: flex\r\n          align-items: center\r\n          flex: 0 0 60px\r\n          width: 60px\r\n          padding-right: 20px\r\n        .text\r\n          display: flex\r\n          flex-direction: column\r\n          justify-content: center\r\n          text-align: left\r\n          flex: 1\r\n          line-height: 20px\r\n          overflow: hidden\r\n          font-size: $font-size-medium\r\n          .name\r\n            margin-bottom: 10px\r\n            color: $color-text\r\n          .desc\r\n            color: $color-text-d\r\n      .loading-container\r\n        position: absolute\r\n        width: 100%\r\n        top: 50%\r\n        transform: translateY(-50%)\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recommend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./recommend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./recommend.vue?vue&type=template&id=c49401ba&scoped=true&\"\nimport script from \"./recommend.vue?vue&type=script&lang=js&\"\nexport * from \"./recommend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./recommend.vue?vue&type=style&index=0&id=c49401ba&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c49401ba\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}