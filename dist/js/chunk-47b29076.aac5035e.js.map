{"version":3,"sources":["webpack:///./src/api/recommend.js","webpack:///./src/components/music-list/music-list.vue?e9ef","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?ab3c","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/components/disc/disc.vue?65a3","webpack:///./src/components/music-list/music-list.vue?b5d9","webpack:///./src/components/disc/disc.vue?2938","webpack:///src/components/disc/disc.vue","webpack:///./src/components/disc/disc.vue?a4c9","webpack:///./src/components/disc/disc.vue"],"names":["__webpack_require__","d","__webpack_exports__","getRecommend","getDiscList","getSonglist","_common_js_jsonp_js__WEBPACK_IMPORTED_MODULE_0__","_config_js__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_2___default","n","url","data","Object","assign","commonParams","platfrom","uin","needNewCode","console","log","jsonp","options","platform","hostUin","sin","ein","sortId","format","categoryId","g_tk","rnd","Math","random","Axios","get","params","then","res","Promise","resolve","disstid","type","json","utf8","onlysong","new_format","concat","loginUin","outCharset","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","back","domProps","innerHTML","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","_v","staticStyle","backgroundSize","attrs","probeType","listen-scroll","listenScroll","scroll","rank","select","selectItem","staticRenderFns","RESERVED_HEIGHT","music_listvue_type_script_lang_js_","mixins","mixin","props","bgImage","String","default","Array","Boolean","scrollY","computed","bgStyle","created","mounted","imgHeight","$refs","clientHeight","minTranslateY","list","$el","top","methods","objectSpread","handlePlaylist","playlist","bottom","refresh","pos","y","$router","_selectItem","asyncToGenerator","regeneratorRuntime","mark","_callee","song","idx","wrap","_context","prev","next","selectPlay","stop","_x","_x2","apply","arguments","randomPlay","vuex_esm","watch","newVal","translateY","max","zIndex","scale","blur","layer","transform","percent","abs","min","filter","paddingTop","height","playBtn","display","components","Scroll","scroll_scroll","SongList","song_list","Loading","loading","music_list_music_listvue_type_script_lang_js_","component","componentNormalizer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_disc_vue_vue_type_style_index_0_id_2d328a38_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_disc_vue_vue_type_style_index_0_id_2d328a38_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_music_list_vue_vue_type_style_index_0_id_4a526635_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_music_list_vue_vue_type_style_index_0_id_4a526635_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","bg-image","discvue_type_script_lang_js_","disc","dissname","imgurl","_getSonglist","_this","dissid","recommend","code","config","_normalizeSongs","cdlist","songlist","push","ret","forEach","id","mid","musicData","songid","songmid","singer","songname","albumname","album","interval","albummid","js_song","MusicList","music_list","disc_discvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-47b29076.aac5035e.js","sourcesContent":["import jsonp from '../common/js/jsonp.js'\r\nimport { commonParams, options } from './config.js'\r\nimport Axios from 'axios';\r\n\r\nexport function getRecommend() { //recommend.vue调用jsop 并返回数据\r\n  const url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    platfrom: 'h5',\r\n    uin: 0,\r\n    needNewCode: 1\r\n  })\r\n  console.log(data)\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\nexport function getDiscList() {\r\n  const url = \"/api/getDiscList\"\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    platform: 'yqq.json',\r\n    hostUin: 0,\r\n    sin: 0,\r\n    ein: 29,\r\n    sortId: 5,\r\n    format: 'json',\r\n    needNewCode: 0,\r\n    categoryId: 10000000,\r\n    g_tk: 1928093487,\r\n    rnd: Math.random(),\r\n  })\r\n\r\n  return Axios.get(url, {\r\n    params: data\r\n  }).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n}\r\n\r\nexport function getSonglist(disstid) {\r\n  const url = '/api/getMusicDisc'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    type: 1,\r\n    json: 1,\r\n    utf8: 1,\r\n    onlysong: 0,\r\n    new_format: 1,\r\n    disstid: `${disstid}`,\r\n    g_tk: 1186940298,\r\n    loginUin: 1477129230,\r\n    hostUin: 0,\r\n    format: 'json',\r\n    outCharset: 'utf - 8',\r\n    platform: 'yqq.json',\r\n    needNewCode: 0,\r\n  })\r\n\r\n  return Axios.get(url, {\r\n    params: data\r\n  }).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length > 0),expression:\"songs.length > 0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{ref:\"filter\",staticClass:\"filter\",staticStyle:{\"backgroundSize\":\"cover\"},style:(_vm.bgStyle)})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('Scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"probeType\":_vm.probeType,\"listen-scroll\":_vm.listenScroll,\"data\":_vm.songs},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('SongList',{attrs:{\"rank\":_vm.rank,\"songs\":_vm.songs},on:{\"select\":_vm.selectItem}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"},[_c('Loading')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" ref=\"playBtn\" v-show=\"songs.length > 0\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\" :style=\"bgStyle\" ref=\"filter\" style=\"backgroundSize: cover\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <Scroll @scroll=\"scroll\" :probeType=\"probeType\" :listen-scroll=\"listenScroll\" :data=\"songs\" class=\"list\" ref=\"list\">\r\n      <div class=\"song-list-wrapper\">\r\n        <SongList :rank=\"rank\" :songs=\"songs\" @select=\"selectItem\" />\r\n      </div>\r\n    </Scroll>\r\n    <div class=\"loading-container\" v-show=\"!songs.length\">\r\n      <Loading />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Scroll from '../../base/scroll/scroll'\r\n  import SongList from '../../base/song-list/song-list'\r\n  import Loading from '../../base/loading/loading'\r\n  // import { getMusicUrl } from '../../api/song.js'\r\n  import { mapActions } from 'vuex'\r\n  import { getPurUrl } from '../../common/js/getSongData'\r\n  import { playlistMixin } from '../../common/js/mixin'\r\n\r\n  const RESERVED_HEIGHT = 40\r\n\r\n  export default {\r\n    mixins: [playlistMixin], //mixin的应用 store的playlist数据变化就会调用定义的handlePlaylist函数 组件同名方法会覆盖mixins\r\n    props: {\r\n      bgImage: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      songs: {\r\n        type: Array,\r\n        default: null,\r\n      },\r\n      title: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      rank: {\r\n        type: Boolean,\r\n        default: false,\r\n      }\r\n    },\r\n    data(){\r\n      return {\r\n        scrollY: 0,\r\n        url: []\r\n      }\r\n    },\r\n    computed: {\r\n      bgStyle() {\r\n        return `background-image: url(${this.bgImage})`\r\n      }\r\n    },\r\n    created() {\r\n      this.probeType = 3\r\n      this.listenScroll = true\r\n    },\r\n    mounted() {\r\n      // console.log(this.songs)\r\n      this.imgHeight = this.$refs.bgImage.clientHeight\r\n      this.minTranslateY = - this.imgHeight + RESERVED_HEIGHT\r\n      //因为向上滑动是负值 所以需要算出最多的滚动距离 即上部最少需要 RESERVED_HEIGHT\r\n      this.$refs.list.$el.style.top = `${this.imgHeight}px`\r\n\r\n      //对列表的top值进行设置  让图片显示出来\r\n    },\r\n    methods: {\r\n      handlePlaylist(playlist) {\r\n        const bottom = playlist.length > 0 ? '60px' : ''\r\n        this.$refs.list.$el.style.bottom = bottom\r\n        this.$refs.list.refresh()\r\n      },\r\n      scroll(pos) {\r\n        // console.log(pos)\r\n        this.scrollY = pos.y\r\n      },\r\n      back() {\r\n        this.$router.back()\r\n      },\r\n      async selectItem(song, idx){ //选中的歌曲idx\r\n        // debugger;\r\n        // let list = await getPurUrl(this.songs, idx)\r\n        // let lyric = await getMLyric(song)\r\n        // console.log(lyric)\r\n        // 不能通过下面方式直接修改 songs 直接给store返回一个新的数组\r\n        // await getMusicUrl(song.mid).then(res => {\r\n        //   // console.log(res)\r\n        //   const lurl = res.req.data.freeflowsip[0]\r\n        //   const purl = res.req_0.data.midurlinfo[0].purl\r\n        //   const url = lurl + purl\r\n        //   song.url = url\r\n        // })\r\n        // console.log(song.url)\r\n        this.selectPlay({\r\n          list: this.songs, //整个歌单\r\n          idx: idx\r\n        })\r\n      },\r\n      random() {\r\n        this.randomPlay({\r\n          list: this.songs,\r\n        })\r\n      },\r\n      ...mapActions([\r\n        'selectPlay',\r\n        'randomPlay'\r\n      ])\r\n    },\r\n    watch: {\r\n      scrollY(newVal) {\r\n        let translateY = Math.max(this.minTranslateY, newVal)\r\n        let zIndex = 0\r\n        let scale = 1\r\n        let blur = 0\r\n\r\n        // console.log(this.minTranslateY, newVal)\r\n        this.$refs.layer.style.transform = `translate3d(0, ${translateY}px, 0)`\r\n        const percent = Math.abs(newVal / this.imgHeight)\r\n        if (newVal > 0) {\r\n          scale = 1 + percent\r\n          //向下滚动图片进行放大效果\r\n          zIndex = 10\r\n        } else {\r\n          blur = Math.min(60 * percent, 60)\r\n        }\r\n        this.$refs.filter.style.filter = `blur(${blur}px)`\r\n\r\n        //列表滚动的同时对layer元素的对象移动\r\n        if (newVal < this.minTranslateY) {\r\n          //当列表滑动到顶部 对图片进行设置 让图片的z-index大于列表的高度 同时也对图片的高度进行设置 即最少的RESEVER_HEIGHT\r\n          zIndex = 10\r\n          this.$refs.bgImage.style.paddingTop = 0\r\n          this.$refs.bgImage.style.height = `${RESERVED_HEIGHT}px`\r\n          this.$refs.playBtn.style.display = 'none'\r\n        } else {\r\n          //当列表滑动正在滑动的时候 让padding撑起图片的宽高比\r\n          this.$refs.bgImage.style.paddingTop = '70%'\r\n          this.$refs.bgImage.style.height = 0\r\n          this.$refs.playBtn.style.display = ''\r\n        }\r\n        //正常滑动图片z-index为0\r\n        this.$refs.bgImage.style.zIndex = zIndex\r\n        this.$refs.bgImage.style.transform = `scale(${scale})`\r\n        // console.log(zIndex, scale)\r\n      }\r\n    },\r\n    components: {\r\n      Scroll,\r\n      SongList,\r\n      Loading\r\n    }\r\n  }\r\n</script>\r\n\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import \"../../common/stylus/variable\"\r\n  @import \"../../common/stylus/mixin\"\r\n  .music-list\r\n    position: fixed\r\n    z-index: 100\r\n    top: 0\r\n    left: 0\r\n    bottom: 0\r\n    right: 0\r\n    background: $color-background\r\n    .back\r\n      position absolute\r\n      top: 0\r\n      left: 6px\r\n      z-index: 50\r\n      .icon-back\r\n        display: block\r\n        padding: 10px\r\n        font-size: $font-size-large-x\r\n        color: $color-theme\r\n    .title\r\n      position: absolute\r\n      top: 0\r\n      left: 10%\r\n      z-index: 40\r\n      width: 80%\r\n      no-wrap()\r\n      text-align: center\r\n      line-height: 40px\r\n      font-size: $font-size-large\r\n      color: $color-text\r\n    .bg-image\r\n      position: relative\r\n      width: 100%\r\n      height: 0\r\n      padding-top: 70%\r\n      transform-origin: top\r\n      background-size: cover\r\n      .play-wrapper\r\n        position: absolute\r\n        bottom: 20px\r\n        z-index: 50\r\n        width: 100%\r\n        .play\r\n          box-sizing: border-box\r\n          width: 135px\r\n          padding: 7px 0\r\n          margin: 0 auto\r\n          text-align: center\r\n          border: 1px solid $color-theme\r\n          color: $color-theme\r\n          border-radius: 100px\r\n          font-size: 0\r\n          .icon-play\r\n            display: inline-block\r\n            vertical-align: middle\r\n            margin-right: 6px\r\n            font-size: $font-size-medium-x\r\n          .text\r\n            display: inline-block\r\n            vertical-align: middle\r\n            font-size: $font-size-small\r\n      .filter\r\n        position: absolute\r\n        top: 0\r\n        left: 0\r\n        transform-origin: top\r\n        width: 100%\r\n        height: 100%\r\n    .bg-layer\r\n      position: relative\r\n      height: 100%\r\n      background: $color-background\r\n    .list\r\n      position: fixed\r\n      top: 0\r\n      bottom: 0\r\n      // overflow: hidden\r\n      width: 100%\r\n      background: $color-background\r\n      .song-list-wrapper\r\n        padding: 20px 30px\r\n    .loading-container\r\n      position: absolute\r\n      width: 100%\r\n      top: 50%\r\n      transform: translateY(-50%)\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=4a526635&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=4a526635&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a526635\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=style&index=0&id=2d328a38&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=style&index=0&id=2d328a38&lang=stylus&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=4a526635&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=4a526635&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slider\"}},[_c('MusicList',{attrs:{\"title\":_vm.title,\"bg-image\":_vm.bgImage,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slider\">\r\n    <!-- 复用musiclist组件 -->\r\n    <MusicList :title=\"title\" :bg-image=\"bgImage\" :songs=\"songs\"></MusicList>\r\n  </transition>\r\n</template>\r\n\r\n\r\n<script>\r\n  import MusicList from '../music-list/music-list'\r\n  import { mapGetters } from 'vuex'\r\n  import { getSonglist } from \"../../api/recommend\"\r\n  import { ERR_OK } from '../../api/config'\r\n  import { createSong } from '../../common/js/song'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        songs: []\r\n      }\r\n    },\r\n    computed: {\r\n      title() {\r\n        return this.disc.dissname\r\n      },\r\n      bgImage() {\r\n        return this.disc.imgurl\r\n      },\r\n      ...mapGetters([\r\n        'disc'\r\n      ])\r\n    },\r\n    created() {//组件实例dom渲染之后就请求歌单内容\r\n      this._getSonglist()\r\n    },\r\n    methods: {\r\n      _getSonglist() {\r\n        if (!this.disc.dissid) { //刷新跳转 因为无法触发请求数据事件\r\n          this.$router.push('/recommend')\r\n          return\r\n        }\r\n        getSonglist(this.disc.dissid).then(res => { //请求具体数据\r\n          if (res.code === ERR_OK) {\r\n            this.songs = this._normalizeSongs(res.cdlist[0].songlist)\r\n            console.log(res.cdlist[0])\r\n          }\r\n        })\r\n      },\r\n      _normalizeSongs(list) {\r\n        let ret = []\r\n        list.forEach(song => {\r\n          // console.log(song)\r\n          if (song.id && song.mid) {\r\n            const musicData = {\r\n              songid: song.id,\r\n              songmid: song.mid,\r\n              singer: song.singer,\r\n              songname: song.name,\r\n              albumname: song.album.name,\r\n              interval: song.interval,\r\n              albummid: song.album.mid,\r\n            }\r\n            ret.push(createSong(musicData))\r\n          }\r\n        })\r\n        // console.log(ret)\r\n        return ret\r\n      }\r\n    },\r\n    components: {\r\n      MusicList\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .slider-enter-active, .slider-leave-active\r\n    transition all 0.3s\r\n\r\n  .slider-enter, .slider-leave-to\r\n    transform translate3d(100%, 0, 0)\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./disc.vue?vue&type=template&id=2d328a38&scoped=true&\"\nimport script from \"./disc.vue?vue&type=script&lang=js&\"\nexport * from \"./disc.vue?vue&type=script&lang=js&\"\nimport style0 from \"./disc.vue?vue&type=style&index=0&id=2d328a38&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d328a38\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}