{"version":3,"sources":["webpack:///./src/components/singer/singer.vue?57c6","webpack:///./src/base/listview/listview.vue?b617","webpack:///./src/common/js/dom.js","webpack:///./src/components/singer/singer.vue?a15f","webpack:///./src/base/listview/listview.vue?12c7","webpack:///src/base/listview/listview.vue","webpack:///./src/base/listview/listview.vue?e5e4","webpack:///./src/base/listview/listview.vue","webpack:///src/components/singer/singer.vue","webpack:///./src/components/singer/singer.vue?67ee","webpack:///./src/components/singer/singer.vue","webpack:///./src/api/singer.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_singer_vue_vue_type_style_index_0_id_3633705b_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_singer_vue_vue_type_style_index_0_id_3633705b_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_listview_vue_vue_type_style_index_0_id_1fdcf151_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_listview_vue_vue_type_style_index_0_id_1fdcf151_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","addClass","el","className","hasClass","newClass","split","push","join","reg","RegExp","test","getData","name","val","prefix","setAttribute","getAttribute","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","data","singers","on","select","selectSinger","staticRenderFns","listviewvue_type_template_id_1fdcf151_scoped_true_render","listenScroll","probeType","scroll","_l","group","key","title","refInFor","_v","_s","item","id","click","$event","selectItem","directives","rawName","value","expression","touchstart","onShortcutTouchStart","touchmove","stopPropagation","preventDefault","onShortcutTouchmove","idx","class","current","currentIndex","data-index","list-fixed","ScrollY","fixedTitle","length","listviewvue_type_template_id_1fdcf151_scoped_true_staticRenderFns","ANCHAR_HEIGHT","TITLE_HEIGHT","listviewvue_type_script_lang_js_","diff","created","touch","listHeight","props","type","Array","default","computed","shortcutList","map","substr","methods","refresh","$refs","listview","$emit","e","anchorIndex","Object","dom","target","firstTouch","touches","y1","pageY","_scrollTo","y2","delta","pos","y","index","scrollToElement","listGroup","_calculateHeight","list","height","i","clientHeight","watch","newY","height1","height2","newVal","fixedTop","fixed","style","transform","concat","components","Scroll","scroll_scroll","Loading","loading","listview_listviewvue_type_script_lang_js_","component","componentNormalizer","HOT_NAME","HOT_SINGER_LEN","singervue_type_script_lang_js_","mixins","mixin","_getSingerList","objectSpread","handlePlaylist","playlist","bottom","singer","$router","path","setSinger","_this","then","res","code","config","_normalizeSinger","hot","items","forEach","js_singer","Fsinger_mid","Fsinger_name","Findex","ret","match","sort","a","b","charCodeAt","vuex_esm","ListView","singer_singervue_type_script_lang_js_","singer_component","__webpack_exports__","d","getSingerList","getSingerDetail","_common_js_jsonp_js__WEBPACK_IMPORTED_MODULE_0__","_config__WEBPACK_IMPORTED_MODULE_1__","url","assign","commonParams","channel","page","pagesize","pagenum","hostUin","needNewCode","platform","g_tk","console","log","jsonp","options","singerId","order","begin","num","songstatus","singermid"],"mappings":"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","file":"js/chunk-535dedc1.bca56568.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=style&index=0&id=3633705b&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=style&index=0&id=3633705b&lang=stylus&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./listview.vue?vue&type=style&index=0&id=1fdcf151&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./listview.vue?vue&type=style&index=0&id=1fdcf151&lang=stylus&scoped=true&\"","export function addClass(el, className) {\r\n  if (hasClass(el, className)) {\r\n    return\r\n  }\r\n  let newClass = el.className.split(' ')\r\n  newClass.push(className)\r\n  el.className = newClass.join(' ')\r\n}\r\n\r\nexport function hasClass(el, className) {\r\n  let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)')\r\n  return reg.test(el.className)\r\n}\r\n\r\nexport function getData(el, name, val) {\r\n  const prefix = 'data-'\r\n  name = prefix + name\r\n  if (val) {\r\n    return el.setAttribute(name, val)\r\n  } else {\r\n    // console.log(el, name)\r\n    return el.getAttribute(name)\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"singer\",staticClass:\"singer\"},[_c('ListView',{ref:\"list\",attrs:{\"data\":_vm.singers},on:{\"select\":_vm.selectSinger}}),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Scroll',{ref:\"listview\",staticClass:\"listview\",attrs:{\"data\":_vm.data,\"listenScroll\":_vm.listenScroll,\"probeType\":_vm.probeType},on:{\"scroll\":_vm.scroll}},[_c('ul',_vm._l((_vm.data),function(group){return _c('li',{key:group.title,ref:\"listGroup\",refInFor:true,staticClass:\"list-group\"},[_c('h2',{staticClass:\"list-title\"},[_vm._v(\"\\n        \"+_vm._s(group.title)+\"\\n      \")]),_c('ul',_vm._l((group.items),function(item){return _c('li',{key:item.id,staticClass:\"list-item\",on:{\"click\":function($event){return _vm.selectItem(item)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.avatar),expression:\"item.avatar\"}],staticClass:\"singer-avatar\"}),_c('span',{staticClass:\"singer-name\"},[_vm._v(_vm._s(item.name))])])}),0)])}),0),_c('div',{staticClass:\"list-shortcut\",on:{\"touchstart\":_vm.onShortcutTouchStart,\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onShortcutTouchmove($event)}}},[_c('ul',_vm._l((_vm.shortcutList),function(item,idx){return _c('li',{key:item,staticClass:\"shortcut-item\",class:{'current': _vm.currentIndex === idx},attrs:{\"data-index\":idx}},[_vm._v(\"\\n        \"+_vm._s(item)+\"\\n      \")])}),0)]),_c('div',{ref:\"fixed\",class:{'list-fixed': _vm.ScrollY <= 0}},[_c('h1',{staticClass:\"fixed-title\"},[_vm._v(_vm._s(_vm.fixedTitle))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.data.length),expression:\"!data.length\"}],staticClass:\"loading-container\"},[_c('Loading')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Scroll class=\"listview\"\r\n          :data=\"data\"\r\n          ref=\"listview\"\r\n          :listenScroll=\"listenScroll\"\r\n          :probeType = \"probeType\"\r\n          @scroll=\"scroll\">\r\n    <ul>\r\n      <li v-for=\"group in data\" :key=\"group.title\" class=\"list-group\" ref=\"listGroup\">\r\n        <h2 class=\"list-title\">\r\n          {{group.title}}\r\n        </h2>\r\n          <ul>\r\n            <li @click=\"selectItem(item)\" v-for=\"item in group.items\" :key=\"item.id\" class=\"list-item\">\r\n              <img class=\"singer-avatar\" v-lazy=\"item.avatar\" />\r\n              <span class=\"singer-name\">{{item.name}}</span>\r\n            </li>\r\n          </ul>\r\n      </li>\r\n    </ul>\r\n    <div class=\"list-shortcut\" @touchstart=\"onShortcutTouchStart\" @touchmove.stop.prevent=\"onShortcutTouchmove\">\r\n      <ul>\r\n        <li v-for=\"(item, idx) of shortcutList\"\r\n            :key=\"item\"\r\n            :class=\"{'current': currentIndex === idx}\"\r\n            class=\"shortcut-item\"\r\n            :data-index=\"idx\">\r\n          {{item}}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div :class=\"{'list-fixed': ScrollY <= 0}\" ref=\"fixed\">\r\n      <h1 class=\"fixed-title\">{{fixedTitle}}</h1>\r\n    </div>\r\n    <div class=\"loading-container\" v-show=\"!data.length\">\r\n      <Loading />\r\n    </div>\r\n  </Scroll>\r\n</template>\r\n\r\n<script>\r\n  import Scroll from '../scroll/scroll'\r\n  import { getData } from '../../common/js/dom.js'\r\n  import Loading from \"../loading/loading\"\r\n\r\n  const ANCHAR_HEIGHT = 18\r\n  const TITLE_HEIGHT = 30\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        ScrollY: -1,\r\n        currentIndex: 0,\r\n        diff: -1\r\n      }\r\n    },\r\n    created() {\r\n      this.touch = {}\r\n      this.listenScroll = true\r\n      this.listHeight = []\r\n      this.probeType = 3\r\n    },\r\n\r\n    props: {\r\n      data: {\r\n        type: Array,\r\n        default: null,\r\n      }\r\n    },\r\n    computed: {\r\n      shortcutList() {\r\n        return this.data.map(group => {\r\n          return group.title.substr(0, 1)\r\n        })\r\n      },\r\n      fixedTitle() {\r\n        if (this.ScrollY > 0) {\r\n          return\r\n        }\r\n        return this.data[this.currentIndex] ? this.data[this.currentIndex].title : ''\r\n      }\r\n    },\r\n    methods: {\r\n      refresh() {\r\n        this.$refs.listview.refresh()\r\n      },\r\n      selectItem(item) {\r\n        //点击到的歌手 向上派发事件\r\n        this.$emit('select', item) //派发出去\r\n      },\r\n      onShortcutTouchStart(e) {\r\n        let anchorIndex = getData(e.target, 'index')\r\n        //得到dom元素的属性值\r\n        let firstTouch = e.touches[0]\r\n        this.touch.y1 = firstTouch.pageY\r\n        this.touch.anchorIndex = anchorIndex\r\n        //将开始触摸的值和获取的index值储存\r\n        this._scrollTo(anchorIndex)\r\n        //歌手列表联动跳转到相同下标位置\r\n      },\r\n      onShortcutTouchmove(e) {\r\n        let firstTouch = e.touches[0]\r\n        this.touch.y2 = firstTouch.pageY\r\n        let delta = (this.touch.y2 - this.touch.y1) / ANCHAR_HEIGHT | 0\r\n        let anchorIndex = +this.touch.anchorIndex + delta\r\n        // console.log(this.touch)\r\n        this._scrollTo(anchorIndex)\r\n      },\r\n      scroll(pos) {\r\n        //监听滚动事件 将ScrollY赋值\r\n        this.ScrollY = pos.y\r\n      },\r\n      _scrollTo(index) {\r\n        if (index === null) {\r\n          //处理顶部和底部的边缘情况\r\n          return\r\n        }\r\n\r\n        if (index < 0) {\r\n          //拖动超出顶部 < 0\r\n          index = 0\r\n        } else if (index > this.listHeight.length - 2) {\r\n          //拖动超出底部\r\n          index = this.listHeight.length - 2\r\n        }\r\n        this.ScrollY = -this.listHeight[index]\r\n        this.$refs.listview.scrollToElement(this.$refs.listGroup[index], 0)\r\n      },\r\n      _calculateHeight() {\r\n        // 清空\r\n        this.listHeight = []\r\n        // console.log('run')\r\n        const list = this.$refs.listGroup\r\n        //拿到所有分类dom元素的实例\r\n        let height = 0\r\n        this.listHeight.push(height)\r\n        for (let i = 0; i < list.length; i++) {\r\n          let item = list[i]\r\n          height += item.clientHeight\r\n          //获取其元素的高度\r\n          this.listHeight.push(height)\r\n          //将其存放在数组中\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      ScrollY(newY) {\r\n        //观察ScrollY变化 即scroll事件\r\n        //当滚动到顶部向上 newY是大于0的\r\n        this._calculateHeight()\r\n\r\n        if (newY > 0) {\r\n          this.currentIndex = 0\r\n          return\r\n        }\r\n        // 保留listHeight\r\n        const listHeight = this.listHeight\r\n        // 遍历listHeight 判断一个元素的滚动高度是否符合listHeight的任意相邻的两元素的上下限 符合就将currentIndex 设为数组的下标\r\n        // console.log(listHeight)\r\n        for (let i = 0; i < listHeight.length; i++) {\r\n          let height1 = listHeight[i]\r\n          let height2 = listHeight[i + 1]\r\n          // console.log(height1, height2)\r\n          //滚动在顶部以下\r\n          if (-newY >= height1 && -newY < height2) {\r\n            this.currentIndex = i\r\n\r\n            this.diff = height2 + newY\r\n            //通过移动进行计算上移与下一个索引的距离\r\n            // console.log('newY:', newY, 'height:', height2)\r\n            // 右边小下标索引联动\r\n            return\r\n          }\r\n        }\r\n      },\r\n      diff(newVal) {\r\n        let fixedTop = (newVal > 0 && newVal < TITLE_HEIGHT) ? newVal - TITLE_HEIGHT : 0\r\n        //通过差距计算需要移动的距离\r\n        // console.log(fixedTop)\r\n        if (this.fixedTop === fixedTop) {\r\n          return\r\n        }\r\n        // console.log(fixedTop, this.fixedTop)\r\n        this.fixedTop = fixedTop\r\n        this.$refs.fixed.style.transform = `translate3d(0, ${fixedTop}px, 0)`\r\n      }\r\n    },\r\n    components: {\r\n      Scroll,\r\n      Loading,\r\n    },\r\n  }\r\n</script>\r\n\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import '../../common/stylus/variable'\r\n  .listview\r\n    position: relative\r\n    width: 100%\r\n    height: 100%\r\n    overflow: hidden\r\n    background: $color-background\r\n    .list-group\r\n      padding-bottom: 30px\r\n      .list-title\r\n        height: 30px\r\n        line-height: 30px\r\n        padding-left: 20px\r\n        color: $color-text-d\r\n        font-size: $font-size-medium\r\n        background: #333\r\n      .list-item\r\n        display: flex\r\n        align-items: center\r\n        padding: 20px 0 0 30px\r\n        .singer-avatar\r\n          width: 50px\r\n          height: 50px\r\n          border-radius: 50%\r\n        .singer-name\r\n          margin-left: 20px\r\n          color: $color-text-d\r\n          font-size: $font-size-medium\r\n  .list-shortcut\r\n    position: absolute\r\n    top: 50%\r\n    right: 0\r\n    color: $color-text-d\r\n    z-index: 20\r\n    transform: translateY(-50%)\r\n    width: 20px\r\n    padding: 20px 0\r\n    text-align: center\r\n    border-radius: 10px\r\n    font-family: Helvetica\r\n    font-size: $font-size-small\r\n    background: rgba(0,0,0,.3)\r\n    .shortcut-item\r\n      padding: 3px\r\n      line-height: 1\r\n  .current\r\n    color: $color-theme\r\n  .list-fixed\r\n    position: absolute\r\n    width: 100%\r\n    top: -1px\r\n    .fixed-title\r\n      width: 100%\r\n      height: 30px\r\n      line-height: 30px\r\n      padding-left: 20px\r\n      color: $color-text-d\r\n      font-size: $font-size-medium\r\n      background: #333\r\n  .loading-container\r\n    position: absolute\r\n    width: 100%\r\n    top: 50%\r\n    transform: translateY(-50%)\r\n</style>\r\n\r\n\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./listview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./listview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./listview.vue?vue&type=template&id=1fdcf151&scoped=true&\"\nimport script from \"./listview.vue?vue&type=script&lang=js&\"\nexport * from \"./listview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./listview.vue?vue&type=style&index=0&id=1fdcf151&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fdcf151\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"singer\" ref=\"singer\">\r\n    <ListView @select=\"selectSinger\" ref=\"list\" :data=\"singers\"></ListView>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { getSingerList } from '../../api/singer'\r\n  import { ERR_OK } from '../../api/config'\r\n  import Singer from '../../common/js/singer'\r\n  import ListView from '../../base/listview/listview'\r\n  import { mapMutations } from 'vuex'\r\n  import { playlistMixin } from '../../common/js/mixin'\r\n\r\n  const HOT_NAME = \"热门\"\r\n  const HOT_SINGER_LEN = 20\r\n\r\n\r\n  export default {\r\n    mixins: [playlistMixin], //组件同名方法会覆盖mixins\r\n    data() {\r\n      return {\r\n        singers: []\r\n      }\r\n    },\r\n\r\n    created() {\r\n      this._getSingerList()//实例创建渲染之后  就需要把数据传给子组件\r\n    },\r\n\r\n    methods: {\r\n      handlePlaylist(playlist) {\r\n        const bottom = playlist.length > 0 ? '60px' : ''\r\n        this.$refs.singer.style.bottom = bottom\r\n        this.$refs.list.refresh()\r\n      },\r\n      selectSinger(singer){\r\n        //监听到select事件 发生路由渲染  sing-detail页面\r\n        this.$router.push({\r\n          path: `/singer/${singer.id}`\r\n        })\r\n        this.setSinger(singer)\r\n      },\r\n      _getSingerList() {\r\n        getSingerList().then(res => {\r\n          if (res.code === ERR_OK) {\r\n            this.singers = this._normalizeSinger(res.data.list)\r\n            //拿到歌手数据\r\n            // debugger;\r\n            // console.log(this.singers)\r\n          }\r\n        })\r\n      },\r\n      _normalizeSinger(list) {\r\n        let map = {\r\n          hot: {\r\n            title: HOT_NAME,\r\n            items: []\r\n          }\r\n        }\r\n\r\n        list.forEach((item, idx) => {\r\n          //热门数据筛选\r\n          if (idx < HOT_SINGER_LEN && idx > 10) {\r\n            map.hot.items.push(new Singer({\r\n              id: item.Fsinger_mid,\r\n              name: item.Fsinger_name,\r\n            }))\r\n          }\r\n\r\n          const key = item.Findex\r\n          //正常数据\r\n          if (!map[key]) {\r\n            map[key] = {\r\n              title: key,\r\n              items: []\r\n            }\r\n          }\r\n\r\n          map[key].items.push(new Singer({\r\n              id: item.Fsinger_mid,\r\n              name: item.Fsinger_name,\r\n          }))\r\n        })\r\n\r\n        //为了得到有序的列表 需要处理得到数据map\r\n        let hot = [] //热门\r\n        let ret = []  //正常\r\n        for (let key in map) {\r\n          let val = map[key]\r\n          if (val.title.match(/[a-zA-z]/)) {\r\n            ret.push(val)\r\n          } else if (val.title === HOT_NAME) {\r\n            hot.push(val)\r\n          }\r\n        }\r\n        //正常数据进行排序\r\n        ret.sort((a, b) => a.title.charCodeAt(0) - b.title.charCodeAt(0))\r\n        return hot.concat(ret)\r\n      },\r\n      ...mapMutations({\r\n        setSinger: 'SET_SINGER',\r\n      })\r\n    },\r\n\r\n    components: {\r\n      ListView,\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .singer\r\n    position fixed\r\n    top 88px\r\n    bottom 0\r\n    width 100%\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./singer.vue?vue&type=template&id=3633705b&scoped=true&\"\nimport script from \"./singer.vue?vue&type=script&lang=js&\"\nexport * from \"./singer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./singer.vue?vue&type=style&index=0&id=3633705b&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3633705b\",\n  null\n  \n)\n\nexport default component.exports","import jsonp from '../common/js/jsonp.js'\r\nimport { commonParams, options } from './config'\r\n\r\nexport function getSingerList() {\r\n  const url = \"https://c.y.qq.com/v8/fcg-bin/v8.fcg\"\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    channel: 'singer',\r\n    page: 'list',\r\n    key: 'all_all_all',\r\n    pagesize: 100,\r\n    pagenum: 1,\r\n    hostUin: 0,\r\n    needNewCode: 0,\r\n    platform: 'yqq',\r\n    g_tk: 1928093487,\r\n  })\r\n\r\n  console.log(data)\r\n  return jsonp(url, data, options)\r\n}\r\n\r\n\r\nexport function getSingerDetail(singerId) {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    hostUin: 0,\r\n    needNewCode: 0,\r\n    platform: 'yqq',\r\n    order: 'listen',\r\n    begin: 0,\r\n    num: 80,\r\n    songstatus: 1,\r\n    g_tk: 1928093487,\r\n    singermid: singerId,\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\n"],"sourceRoot":""}